В наших функциях не предусмотрена возможность возврата EOF. Подумайте, что надо
сделать, чтобы можно было возвращать EOF, и скорректируйте соответственно программу.